<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>S2K Sewing - Customer Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link rel="stylesheet" href="/assets/css/server/customers.css" />
    <script src="/assets/js/server/customers.js"></script>
  </head>
  <body>
    <div class="dashboard-container">
      <div class="header">
        <h1>Customer Analytics</h1>
        <p>Insights of Customer</p>
      </div>

      <div class="filters-section">
        <div class="filters-grid">
          <div class="filter-group">
            <label for="dateFrom">From Date</label>
            <input type="date" id="dateFrom" />
          </div>
          <div class="filter-group">
            <label for="dateTo">To Date</label>
            <input type="date" id="dateTo" />
          </div>
          <div class="filter-group">
            <label for="sortBy">Sort By</label>
            <select id="sortBy">
              <option value="createdDate">Registration Date</option>
              <option value="fullname">Name</option>
              <option value="email">Email</option>
              <option value="userId">User ID</option>
            </select>
          </div>
          <div class="filter-group">
            <button class="btn" onclick="applyFilters()">Apply Filters</button>
          </div>
        </div>
      </div>

      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-number" id="totalCustomers">0</div>
          <div class="stat-label">Total Customers</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="newThisMonth">0</div>
          <div class="stat-label">New This Month</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="activeUsers">0</div>
          <div class="stat-label">Active Users</div>
        </div>
        <div class="stat-card" style="display: none">
          <div class="stat-number" id="avgAge">0</div>
          <div class="stat-label">Avg. Account Age (Days)</div>
        </div>
      </div>

      <div class="charts-grid">
        <div class="chart-container">
          <div class="chart-title">Customer Registration Trends</div>
          <div class="chart-wrapper">
            <canvas id="registrationChart"></canvas>
          </div>
        </div>

        <div class="chart-container">
          <div class="chart-title">Customer Distribution by Domain</div>
          <div class="chart-wrapper">
            <canvas id="domainChart"></canvas>
          </div>
        </div>

        <div class="chart-container">
          <div class="chart-title">Monthly Registration Growth</div>
          <div class="chart-wrapper">
            <canvas id="growthChart"></canvas>
          </div>
        </div>

        <div class="chart-container" style="display: none">
          <div class="chart-title">Customer Activity Overview</div>
          <div class="chart-wrapper">
            <canvas id="activityChart"></canvas>
          </div>
        </div>
      </div>

      <div class="data-table">
        <div class="table-header">Customer Details</div>
        <div class="table-wrapper">
          <table id="customersTable">
            <thead>
              <tr>
                <th>User ID</th>
                <th>Full Name</th>
                <th>Email</th>
                <th>Mobile</th>
                <th>Username</th>
                <th>Registration Date</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody id="customersTableBody">
              <tr>
                <td colspan="7" class="loading">Loading customer data...</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div id="paginationControls" style="text-align: center; padding: 20px">
          <button class="btn" onclick="prevPage()">Previous</button>
          <span id="pageInfo" style="margin: 0 15px; font-weight: bold"></span>
          <button class="btn" onclick="nextPage()">Next</button>
        </div>
      </div>
    </div>
  </body>
</html>
