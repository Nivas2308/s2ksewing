<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>S2K Sewing - Home</title>
     <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    />
    <link rel="stylesheet" href="/assets/component/index.css">
    <script src="/assets/component/profile.js"></script>
    <script src="/assets/component/auth.js"></script>
<style>
    /* imports */
@import url("https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap");

/* Reset Settings */
:root {
  /* color */
  --primary-color: #e6fae7;
  --secondary-color: #f4f4f4;
  --third-color: #f1f1f1;
  --accent-color: #4caf50;
  --text-color: #333;
  --light-text: #666;
  --border-color: #ddd;
  --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  --transition: all 0.3s ease;

  /* font */
  --primary-font: "Roboto", sans-serif;
  --secondary-font: "Lora", serif;
  --third-font: "Poppins", sans-serif;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  text-decoration: none;
  color: var(--text-color);
}

::-webkit-scrollbar {
  width: 8px;
  background-color: #f5f5f5;
}

::-webkit-scrollbar-thumb {
  background-color: var(--accent-color);
  border-radius: 10px;
}

body {
  background-color: white;
  font-family: var(--primary-font);
  line-height: 1.6;
  color: var(--text-color);
  overflow-x: hidden;
}

 /* Loading Animation */
      #loader {
        position: fixed;
        width: 100vw;
        height: 100vh;
        background: white;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
      }
      .spinner {
        width: 60px;
        height: 60px;
        border: 5px solid rgba(76, 175, 80, 0.2);
        border-top: 5px solid var(--accent-color);
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }



/* Shop Section & Search */
.shop {
  display: flex;
  justify-content: start;
  align-items: center;
  background-color: var(--third-color);
  height: 80px;
  padding: 0 5%;
  margin-bottom: 20px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

/* Filter Button */
#filterBtn {
  background-color: white;
  color: var(--text-color);
  border: none;
  cursor: pointer;
  font-size: 20px;
  font-weight: 600;
  padding: 12px 16px;
  border-radius: 8px;
  transition: var(--transition);
  box-shadow: var(--shadow);
}

#filterBtn:hover {
  background-color: var(--accent-color);
  color: white;
}

#searchBar {
  background: #fff;
  display: flex;
  align-items: center;
  padding: 12px 20px;
  border-radius: 28px;
  width: 70%;
  /* max-width: 800px; */
  transition: var(--transition);
  border: 2px solid transparent;
  box-shadow: var(--shadow);
}

#searchBar:focus-within {
  border-color: var(--accent-color);
  box-shadow: 0 0 6px rgba(76, 175, 80, 0.4);
}

.search-input {
  font-size: 16px;
  font-family: var(--third-font);
  color: var(--text-color);
  outline: none;
  border: none;
  background: transparent;
  width: 100%;
}

.search-input::placeholder {
  color: var(--light-text);
}





 .search-item-content {
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  gap: 0;
}

.search-item-image {
  flex: 0 0 42px;
  width: 42px;
  height: 42px;
  border-radius: 8px;
  overflow: hidden;
  background: #f1f1f1;
  border: 1px solid #e5e7eb;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 16px;
}

.search-item-details {
  flex: 1 1 0;
  min-width: 0;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.search-item-type {
  flex: 0 0 auto;
  margin-left: 16px;
  align-self: center;
}

@media (max-width: 600px) {
  .search-item-content {
    gap: 0;
  }
  .search-item-image {
    width: 32px;
    height: 32px;
    margin-right: 10px;
  }
  .search-item-type {
    margin-left: 8px;
  }
}

.search-results div:hover {
  background: var(--primary-color);
}


/* Overlay */
#overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100vh;
  background: rgba(0, 0, 0, 0.6);
  z-index: 999;
  backdrop-filter: blur(2px);
}

/* Sidebar */
#categorySidebar {
  width: 300px;
  height: 100vh;
  position: fixed;
  top: 0;
  left: -320px;
  background-color: white;
  padding: 30px 20px;
  box-shadow: 2px 0 15px rgba(0, 0, 0, 0.2);
  transition: 0.3s ease-in-out;
  z-index: 1000;
  overflow-y: auto;
}

#categorySidebar nav {
  margin-top: 20px;
}

#categorySidebar nav h3 {
  font-size: 1.6rem;
  font-weight: 700;
  color: var(--accent-color);
  margin-bottom: 25px;
  position: relative;
}

#categorySidebar nav h3:after {
  content: '';
  position: absolute;
  bottom: -8px;
  left: 0;
  width: 40px;
  height: 3px;
  background-color: var(--accent-color);
}

.navlist {
  list-style: none;
  width: 100%;
}

.navlist li {
  margin: 15px 0;
  border-bottom: 1px solid var(--border-color);
  width: 100%;
  padding-bottom: 15px;
  transition: var(--transition);
}

.navlist li a {
  display: block;
  font-size: 1.2rem;
  font-weight: 500;
  padding: 8px 10px;
  border-left: 3px solid transparent;
  transition: all 0.3s;
}

.navlist li a:hover {
  color: var(--accent-color);
  border-left: 3px solid var(--accent-color);
  padding-left: 15px;
}

/* Close Button */
#closeSidebar {
  position: absolute;
  top: 15px;
  right: 15px;
  font-size: 20px;
  background: none;
  border: none;
  cursor: pointer;
  color: #555;
  transition: var(--transition);
}

#closeSidebar:hover {
  color: #f44336;
}

/* BANNER ALIGNMENT */
.header-container,
.highhead-container {
  position: relative;
  display: flex;
  width: 100%;
  justify-content: center;
  align-items: center;
  text-align: center;
margin: 10px 0;
  overflow: hidden;
}

.header-container img,
.highhead-container img {
    width: 90%;
    /* max-width: 1400px; */
    height: auto;
    /* max-height: 500px; */
    object-fit: cover;
    border-radius: 12px;
    box-shadow: var(--shadow);
    transition: transform 0.5s ease;
}

.header-container:hover img,
.highhead-container:hover img {
  transform: scale(1.02);
}

.header-content {
  position: absolute;
  left: 10%;
  top: 50%;
  transform: translateY(-50%);
  text-align: left;
}

.header-content h2 {
  font-size: 2.5rem;
  font-weight: 700;
  color: white;
  text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.7);
  margin-bottom: 10px;
  line-height: 1.2;
}

/* HIGHLIGHTED HEADER TEXT ALIGNMENT */
.highhead-content {
  position: absolute;
  right: 10%;
  top: 50%;
  transform: translateY(-50%);
  text-align: right;
}

.highhead-content h2 {
  font-size: 2.5rem;
  font-weight: 700;
  color: white;
  text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.7);
  margin-bottom: 10px;
  line-height: 1.2;
}

/* CATEGORY PRODUCT ALIGNMENT  */
.category-container {
  padding: 20px 5%;
  
}

.category-container h2 {
  font-size: 1.8rem;
  font-weight: 600;
  margin-bottom: 25px;
  position: relative;
  display: inline-block;
  color: var(--accent-color);
}

.category-container h2:after {
  content: '';
  position: absolute;
  bottom: -5px;
  left: 0;
  width: 40px;
  height: 3px;
  background-color: var(--accent-color);
}

.subcategory-container {
  display: flex;
  overflow-x: auto;
  gap: 25px;
  padding: 10px 0;
  scroll-behavior: smooth;
  scrollbar-width: thin;
  -ms-overflow-style: none;
}

.subcategory-container::-webkit-scrollbar {
  height: 6px;
}

.subcategory-container::-webkit-scrollbar-thumb {
  background-color: var(--accent-color);
  border-radius: 10px;
}

/* Individual Product Cards */
.subcategory-item {
  background: white;
  padding: 15px;
  border-radius: 12px;
  border: 1px solid var(--border-color);
  text-align: center;
  min-width: 220px;
  max-width: 280px;
  box-shadow: var(--shadow);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  cursor: pointer;
}

.subcategory-item:hover {
  transform: translateY(-10px);
  box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
}

.subcategory-img {
  width: 100%;
  height: 180px;
  object-fit: cover;
  border-radius: 8px;
  border: 1px solid var(--border-color);
  margin-bottom: 10px;
  transition: transform 0.3s ease;
}

.subcategory-item:hover .subcategory-img {
  transform: scale(1.05);
}

.subcategory-title {
  font-size: 1.2rem;
  font-weight: 600;
  margin-bottom: 10px;
  text-align: center;
  color: var(--text-color);
}

.subcategory-description {
  font-size: 0.9rem;
  color: var(--light-text);
 
  line-height: 1.5;
}

/* FAQ's Section  */

.faq {
  width: 100%;

}

.faq h2 {
  font-size: 1.8rem;
  font-weight: 600;
  margin-bottom: 30px;
  color: var(--accent-color);
  position: relative;
  display: inline-block;
}

.faq h2:after {
  content: '';
  position: absolute;
  bottom: -5px;
  left: 0;
  width: 40px;
  height: 3px;
  background-color: var(--accent-color);
}

.faq-item {
  margin-bottom: 15px;
  border: 1px solid #eaeaea;
  border-radius: 8px;
  overflow: hidden;
}

.faq-question {
  background: white;
  padding: 15px 20px;
  width: 100%;
  border: none;
  text-align: left;
  cursor: pointer;
  font-size: 1.1rem;
  font-weight: 500;
  transition: var(--transition);
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: relative;
}

.faq-question:after {
  content: '\25B6'; /* Unicode for right-pointing triangle */
  font-size: 1.2rem;
  color: var(--accent-color);
  transition: transform 0.3s;
  margin-left: 10px;
}

/* Rotate arrow when open */
.faq-question.active:after,
.faq-question[aria-expanded="true"]:after {
  transform: rotate(90deg);
}

.faq-question:hover {
  background-color: #f5f5f5;
}

.faq-answer {
  display: none;
  padding: 15px 20px;
  background: #fff;
  border-top: 1px solid #eaeaea;
  line-height: 1.6;
}

.faq-answer.active {
  display: block;
}




@media (max-width: 820px){
    .header-container img, .highhead-container img {
    width: 95%;
    height: 350px;
    object-fit: fill;
    } 
  }
@media (max-width: 480px) {
 
    .header-container, .highhead-container {
   
    margin-bottom: 10px;
   
}
  .header-content h2,
  .highhead-content h2 {
    font-size: 1.3rem;
  }
  
  .header-container img, .highhead-container img {
    width: 95%;
    height: 300px;
    object-fit: fill;
}
  
  .subcategory-item {
    min-width: 175px;
  }
  
  .subcategory-img {
    height: 150px;
  }
  
  .subcategory-title {
    font-size: 1rem;
  }
  
}

@media (max-width: 380px){
    .header-container img, .highhead-container img {
    width: 95%;
    height: 250px;
    object-fit: fill;
} 

.subcategory-img {
    height: 120px;
}

.subcategory-item {
    min-width: 150px;

}
.subcategory-container {
   
    gap: 20px;
  
}

}


.container {
            max-width: 95%;
            margin: 0 auto;
            padding: 2rem;
        }
        
        h2 {
            color: #212529;
            margin-bottom: 1.5rem;
            font-weight: 600;
            font-size: 1.8rem;
            padding-bottom: 0.5rem;
        }
        
        /* Rating summary section */
        .rating-summary {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .rating-layout {
            display: flex;
            align-items: flex-start;
        }
        
        .average-score {
            text-align: center;
            padding-right: 2rem;
            border-right: 1px solid #e9ecef;
            min-width: 180px;
            margin-right: 2rem;
        }
        
        .average-rating {
            font-size: 3.5rem;
            font-weight: bold;
            color: #212529;
            line-height: 1.2;
        }
        
        .stars-display {
            color: #ffc107;
            font-size: 1.8rem;
            margin: 0.5rem 0;
        }
        
        .rating-label {
            font-size: 1.2rem;
            color: #6c757d;
            margin: 0.5rem 0;
            font-weight: 500;
        }
        
        .total-reviews {
            color: #6c757d;
            font-size: 0.95rem;
            margin-top: 0.5rem;
        }
        
        /* Enhanced review carousel */
        .review-carousel {
            position: relative;
            overflow: hidden;
            flex-grow: 1;
            width: calc(100% - 220px);
        }
        
        .carousel-container {
            display: flex;
            overflow-x: auto;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
            padding: 0.5rem 0 1.5rem 0;
            scrollbar-width: none;
            gap: 1rem;
        }
        .review-slide {
            min-width: 280px;
            max-width: 320px;
            flex: 0 0 auto;
            padding: 1.5rem;
            background-color: #f8f9fa;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            border-left: 4px solid var(--accent-color);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .review-slide:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .navigation-buttons {
            display: flex;
            justify-content: flex-end;
            margin-top: 1rem;
        }
        
        .nav-button {
            background-color: #343a40;
            color: white;
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            margin: 0 0.5rem;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .nav-button:hover {
            background-color: #4dabf7;
            transform: scale(1.05);
        }
        
        /* Form container */
        #reviewForm {
            max-width: 600px;
            margin: 2rem auto;
            padding: 2rem;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
        }
        
        /* Star rating styling */
        .stars {
            display: flex;
            flex-direction: row-reverse;
            justify-content: flex-end;
            margin-bottom: 1.5rem;
        }
        
        .stars input {
            display: none;
        }
        
        .stars label {
            font-size: 2rem;
            color: #dee2e6;
            cursor: pointer;
            transition: color 0.2s ease;
            margin: 0 0.1rem;
        }
        
        .stars label:hover,
        .stars label:hover ~ label,
        .stars input:checked ~ label {
            color: #ffc107;
        }
        
        /* Text area styling */
        textarea {
            width: 90%;
            min-height: 150px;
            padding: 1rem;
            margin-bottom: 1.5rem;
            border: 1px solid #ced4da;
            border-radius: 6px;
            resize: vertical;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        textarea:focus {
            outline: none;
            border-color: #4dabf7;
            box-shadow: 0 0 8px rgba(77, 171, 247, 0.2);
        }
        
        textarea::placeholder {
            color: #adb5bd;
        }
        
        /* Submit button styling */
        button[type="submit"] {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 0.8rem 1.8rem;
            font-size: 1rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        button[type="submit"]:hover {
            background-color:var(--accent-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        /* Individual review styling inside carousel */
        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.8rem;
        }
        
        .review-rating {
            color: #ffc107;
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            display: flex;
        }
        
        .review-date {
            color: #6c757d;
            font-size: 0.85rem;
        }
        
        /* Modified: Review content with line breaks and fixed height */
        .review-content {
            color: #495057;
            line-height: 1.7;
            margin-bottom: 1rem;
            max-height: 100px;
            overflow-y: auto;
            font-size: 0.95rem;
            word-wrap: break-word;
            white-space: pre-line; /* This will honor BR tags and line breaks */
        }
        
        .action-button {
            color: var(--accent-color);
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            display: inline-block;
            margin-top: 0.5rem;
            transition: color 0.2s;
        }
        
        .action-button:hover {
            color: var(--accent-color);
            text-decoration: underline;
        }
        
        /* Empty state */
        .empty-state {
            text-align: center;
            padding: 2rem;
            color: #6c757d;
        }
        
        /* Modal popup for full review */
        .review-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.6);
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        
        .review-modal.show {
            opacity: 1;
        }
        
        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            max-width: 600px;
            width: 90%;
            position: relative;
            transform: translateY(-50px);
            opacity: 0;
            transition: transform 0.4s ease-out, opacity 0.4s ease-out;
        }
        
        .review-modal.show .modal-content {
            transform: translateY(0);
            opacity: 1;
        }
        
        .close-modal {
            color: #aaa;
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.2s;
        }
        
        .close-modal:hover {
            color: #4dabf7;
        }
        
        .modal-review-content {
            color: #495057;
            line-height: 1.7;
            margin: 1rem 0;
            font-size: 1rem;
            white-space: pre-line; /* This will honor BR tags and line breaks */
        }
        
        .modal-stars {
            color: #ffc107;
            font-size: 1.5rem;
            margin-bottom: 0.8rem;
        }
        
        .modal-date {
            color: #6c757d;
            font-size: 0.9rem;
            margin-top: 1rem;
            text-align: right;
        }
        
        /* Responsive adjustments */
        @media (max-width: 900px) {
            .rating-layout {
                flex-direction: column;
            }

    
            
            .average-score {
                margin-right: 0;
                margin-bottom: 2rem;
                padding-right: 0;
                padding-bottom: 1.5rem;
                border-right: none;
                border-bottom: 1px solid #e9ecef;
                width: 100%;
                text-align: center;
            }
            
            .review-carousel {
                width: 100%;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .rating-summary {
                padding: 1.5rem;
            }
            
            .average-rating {
                font-size: 3rem;
            }
            
            .stars-display {
                font-size: 1.5rem;
            }
            
            .review-slide {
                min-width: 85%;
                max-width: 85%;
            }
            
            #reviewForm {
                padding: 1.5rem;
                margin: 1rem;
            }
            
            h2 {
                font-size: 1.5rem;
            }
            
            .stars label {
                font-size: 1.8rem;
            }
            
            .navigation-buttons {
                justify-content: center;
            }
            
            .modal-content {
                margin: 20% auto;
                width: 95%;
            }
        }
        
        @media (max-width: 480px) {
            .review-slide {
                min-width: 95%;
                max-width: 95%;
                padding: 1.2rem;
            }
            
            .rating-summary {
                padding: 1.2rem;
            }
            
            .average-rating {
                font-size: 2.5rem;
            }
        }
        .dropdown {
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .dropdown-header {
            background-color:#e6fae7;
            padding: 10px 15px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
        }
        
        .dropdown-content {
            display: none;
            padding: 15px;
            border-top: 1px solid #ddd;
        }
        /* CSS for the custom alert */
.custom-alert {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 1000;
    justify-content: center;
    align-items: center;
}

.alert-content {
    background-color: white;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    padding: 20px;
    display: flex;
    align-items: center;
    max-width: 400px;
    width: 90%;
    position: relative;
    animation: slideIn 0.3s ease-out;
}

@keyframes slideIn {
    from {
        transform: translateY(-20px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.alert-icon {
    flex: 0 0 40px;
    height: 40px;
    border-radius: 50%;
    background-color: #4CAF50;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    margin-right: 15px;
}

.alert-message {
    flex: 1;
    font-size: 16px;
    color: #333;
}

.alert-close {
    position: absolute;
    top: 10px;
    right: 10px;
    background: none;
    border: none;
    font-size: 20px;
    cursor: pointer;
    color: #999;
}

.alert-close:hover {
    color: #333;
}
/* CSS for the custom error alert */
.custom-alert {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 1000;
    justify-content: center;
    align-items: center;
}

.alert-content {
    background-color: white;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    padding: 20px;
    display: flex;
    align-items: center;
    max-width: 400px;
    width: 90%;
    position: relative;
    animation: shakeAlert 0.5s ease-out;
}

@keyframes shakeAlert {
    0% { transform: translateX(0); }
    20% { transform: translateX(-10px); }
    40% { transform: translateX(10px); }
    60% { transform: translateX(-5px); }
    80% { transform: translateX(5px); }
    100% { transform: translateX(0); }
}

.alert-icon {
    flex: 0 0 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    margin-right: 15px;
}

.error-alert .alert-icon {
    background-color: #F44336;
}

.alert-message {
    flex: 1;
    font-size: 16px;
    color: #333;
}

.alert-close {
    position: absolute;
    top: 10px;
    right: 10px;
    background: none;
    border: none;
    font-size: 20px;
    cursor: pointer;
    color: #999;
}

.alert-close:hover {
    color: #333;
}

/* Testimonial Section */

.testimonials-section {
    max-width: 91.5%;
    margin: 10px auto;
    
}

.testimonials-header {
    text-align: center;
    margin-bottom: 40px;
}

.section-subtitle {
    display: block;
    font-size: 16px;
    font-weight: 500;
    color: var(--accent-color);
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-bottom: 10px;
}

.section-title {
    font-size: 36px;
    font-weight: 700;
    color: #1e293b;
    margin-bottom: 0;
}

.section-divider {
    width: 60px;
    height: 4px;
    background:var(--accent-color);
    margin: 0 auto;
    border-radius: 2px;
}

.testimonials-container {
    display: flex;
    gap: 30px;
    overflow: hidden;
    margin-bottom: 40px;
}

.testimonial-card {
    flex: 0 0 calc(33.333% - 20px);
    min-width: calc(33.333% - 20px);
    background-color: #ffffff;
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
    padding: 30px;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.testimonial-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
}



.profile-header {
    display: flex;
    align-items: center;
    margin-bottom: 25px;
}

.profile-img-container {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    overflow: hidden;
    border: 3px solid  var(--accent-color);
    box-shadow: 0 5px 15px rgba(67, 97, 238, 0.2);
    flex-shrink: 0;
}

.profile-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.client-info {
    margin-left: 15px;
}

.client-name {
    font-weight: 600;
    font-size: 18px;
    color: #1e293b;
    margin-bottom: 4px;
}

.client-position {
    color: #64748b;
    font-size: 14px;
    font-weight: 400;
}

.testimonial-text {
    color: #475569;
    font-size: 15px;
    line-height: 1.7;
    margin-bottom: 20px;
}

.testimonial-rating {
    color: #fbbf24;
    font-size: 16px;
}

.testimonials-controls {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px;
}

.control-btn {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: #ffffff;
    border: 1px solid #e2e8f0;
    color: #18f3b1;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
}

.control-btn:hover {
    background-color:  #18f3b1;
    color: #ffffff;
    border-color:  #18f3b1;
}

.navigation {
    display: flex;
    gap: 8px;
}

.nav-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background-color: #e2e8f0;
    cursor: pointer;
    transition: all 0.3s ease;
}

.nav-dot.active {
    background-color:  #18f3b1;
    transform: scale(1.2);
}

@media (max-width: 992px) {
    .testimonial-card {
        flex: 0 0 calc(50% - 15px);
        min-width: calc(50% - 15px);
    }
}

@media (max-width: 768px) {
    .testimonials-section {
        margin: 20px auto;
    }
    
    .section-title {
        font-size: 30px;
    }
    
    .testimonial-card {
        flex: 0 0 100%;
        min-width: 100%;
    }
}

@media (max-width: 480px) {
    .testimonials-header {
        margin-bottom: 40px;
    }
    
    .section-subtitle {
        font-size: 14px;
    }
    
    .section-title {
        font-size: 26px;
    }
    
    .testimonial-card {
        padding: 25px;
    }
    
    .profile-img-container {
        width: 60px;
        height: 60px;
    }
}
/* Add these styles to the end of your existing CSS */

/* Testimonial card animations and hover effects */
.testimonial-card {
    --index: 0;
    border-bottom: 4px solid transparent;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.testimonial-card:nth-child(1) { --index: 0; }
.testimonial-card:nth-child(2) { --index: 1; }
.testimonial-card:nth-child(3) { --index: 2; }

.testimonial-card:hover {
    border-bottom: 4px solid  #18f3b1;
}

/* Improved quote styling */
.testimonial-text {
    position: relative;
    padding: 0 5px;
    z-index: 1;
}



/* Improved controls */
.testimonials-controls {
    margin-top: 40px;
}

.control-btn {
    position: relative;
    overflow: hidden;
}

.control-btn::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background-color: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    transition: width 0.3s, height 0.3s;
}

.control-btn:active::after {
    width: 80px;
    height: 80px;
}

/* Improved navigation dots */
.nav-dot {
    position: relative;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.nav-dot::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 20px;
    height: 20px;
    background-color: var(--accent-color);
    border-radius: 50%;
    transform: translate(-50%, -50%) scale(0);
    transition: transform 0.3s;
    z-index: -1;
}

.nav-dot:hover::after {
    transform: translate(-50%, -50%) scale(1);
}

.nav-dot.active {
    background-color: var(--accent-color);
    transform: scale(1.2);
}



/* Add print styles */
@media print {
    .testimonials-controls {
        display: none;
    }
    
    .testimonial-card {
        box-shadow: none;
        border: 1px solid #e2e8f0;
        break-inside: avoid;
    }
    
    .testimonials-container {
        display: block;
    }
    
    .testimonial-card {
        width: 100%;
        margin-bottom: 20px;
    }
}


/* Add smooth scrolling */
html {
    scroll-behavior: smooth;
}

/* Improve focus styles for accessibility */
:focus {
    outline: 2px solid  #18f3b1;
    outline-offset: 2px;
}

.nav-dot:focus {
    box-shadow: 0 0 0 3px rgba(11, 255, 157, 0.947);
}

/* Add custom scrollbar */
::-webkit-scrollbar {
    width: 10px;
}

::-webkit-scrollbar-track {
    background: #f1f1f1;
}

::-webkit-scrollbar-thumb {
    background: #c7d2fe;
    border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
    background:  #18f3b1;
}

/* --- Unified, Enhanced Search Bar & Dropdown Styles --- */
.search-container {
  position: relative;
  width: 100%;
 
  margin: 0 50px;
}

#searchBar {
  width: 100%;
  padding: 14px 18px;
  border: 2px solid #e5e7eb;
  border-radius: 32px;
  font-size: 1rem;
  background: #fff;
  box-shadow: 0 2px 8px rgba(76,175,80,0.06);
  transition: border-color 0.2s, box-shadow 0.2s;
  display: block;
}

#searchBar:focus {
  border-color: #4caf50;
  box-shadow: 0 0 0 3px rgba(76,175,80,0.12);
  outline: none;
}

.search-results {
  position: absolute;
  width: 100%;
  top: 110%;
  left: 0;
  right: 0;
  background: #fff;
  border: 1.5px solid #e5e7eb;
  border-radius: 14px;
  box-shadow: 0 8px 32px rgba(76,175,80,0.10);
  z-index: 99;
  max-height: 420px;
  overflow-y: auto;
  opacity: 0;
  pointer-events: none;
  transform: translateY(-8px) scale(0.98);
  transition: opacity 0.18s, transform 0.18s;
}

.search-results[style*="display: block"] {
  opacity: 1;
  pointer-events: auto;
  transform: translateY(0) scale(1);
}

.search-section-header {
  padding: 10px 18px 6px;
  font-size: 12px;
  font-weight: 700;
  color: #4caf50;
  background: #f8fafc;
  border-bottom: 1px solid #e5e7eb;
  letter-spacing: 1px;
}

.search-result-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 13px 18px;
  cursor: pointer;
  border-bottom: 1px solid #f1f5f9;
  background: #fff;
  transition: background 0.18s, border-left 0.18s;
  border-left: 3px solid transparent;
  position: relative;
}

.search-result-item:last-child {
  border-bottom: none;
}

.search-result-item.selected,
.search-result-item.hover,
.search-result-item:active {
  background: #e6fae7;
  border-left: 3px solid #4caf50;
}

.search-item-image {
  width: 42px;
  height: 42px;
  border-radius: 8px;
  overflow: hidden;
  background: #f1f1f1;
  border: 1px solid #e5e7eb;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

.search-item-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.search-item-details {
  flex: 1;
  min-width: 0;
}

.search-item-title {
  font-weight: 600;
  color: #222;
  font-size: 15px;
  line-height: 1.3;
  margin-bottom: 2px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.search-item-subtitle {
  font-size: 12px;
  color: #6b7280;
  line-height: 1.2;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.search-item-price {
  font-size: 13px;
  font-weight: 600;
  color: #059669;
  margin-top: 2px;
}

.search-item-type {
  font-size: 10px;
  font-weight: 500;
  padding: 4px 10px;
  border-radius: 12px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  flex-shrink: 0;
  background: #e6fae7;
  color: #388e3c;
}

.category-item .search-item-type {
  background: #dbeafe;
  color: #1d4ed8;
}

.product-item .search-item-type {
  background: #d1fae5;
  color: #065f46;
}

.search-no-results {
  padding: 30px 18px;
  text-align: center;
  color: #6b7280;
  font-size: 15px;
  font-style: italic;
}

/* Custom Scrollbar for Search Results */
.search-results::-webkit-scrollbar {
  width: 4px;
}
.search-results::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 2px;
}
.search-results::-webkit-scrollbar-thumb:hover {
  background: #94a3b8;
}

/* Responsive adjustments */
@media (max-width: 600px) {
  .search-container {
    max-width: 100vw;
    padding: 0 2vw;
    margin: 0;
  }
  #searchBar {
    font-size: 1rem;
    padding: 12px 10px;
    border-radius: 20px;
  }
  .search-results {
    max-width: 100vw;
    left: 0;
    right: 0;
    border-radius: 10px;
    min-width: 0;
    padding: 0;
  }
  .search-result-item {
    padding: 10px 6px;
    gap: 0;
  }
  .search-item-content {
    gap: 0;
    flex-wrap: wrap;
  }
  .search-item-image {
    width: 28px;
    height: 28px;
    margin-right: 8px;
    border-radius: 5px;
  }
  .search-item-details {
    min-width: 0;
  }
  .search-item-title {
    font-size: 12px;
  }
  .search-item-subtitle {
    font-size: 10px;
  }
  .search-item-type {
    font-size: 8.5px;
    padding: 2px 5px;
    margin-left: 4px;
    border-radius: 8px;
  }
}

@media (max-width: 400px) {
  .search-result-item {
    padding: 8px 2px;
  }
  .search-item-image {
    width: 22px;
    height: 22px;
    margin-right: 4px;
  }
  .search-item-title {
    font-size: 10.5px;
  }
  .search-item-type {
    font-size: 7.5px;
    padding: 1.5px 4px;
  }
}
</style>
    
  </head>
  <body>

 <!-- Loader -->
    <div id="loader">
      <div class="spinner"></div>
    </div>

     <!-- AD BAR STARTS -->
     <div class="adbar-container">
      <marquee id="scrolling-text">Welcome to S2K Sewing</marquee>
    </div>

   <!-- Modified cart icon in the nav section -->
   <div class="nav-container">
    <div class="logo" id="logo-container">
    <a href="index.html">
      <img id="site-logo" src="" alt="S2K Sewing"  />
    </a>
  </div>
  
  
    <div class="nav-icons">
      <a href="cart.html" id="your-cart-icon-container" style="position: relative; display: inline-block;">
        <i class="fa-solid fa-cart-shopping"></i>
        <span class="cart-counter" id="cart-count">0</span>
      </a>
      <a href="login.html" id="profile-link">
        <i class="fa fa-user-circle" id="profile-icon"></i>
      </a>
    </div>
  </div>

  <header class="shop">
    <div class="filtercontainer">
      <button id="filterBtn" onclick="toggleFilter()">☰</button>
    </div>
  
    <div class="search-container">
      <input
        type="search"
        id="searchBar"
        placeholder="Search for Products"
        oninput="searchProducts()"
        onfocus="handleSearchFocus()"
        autocomplete="off"
      />
      <div id="searchResults" class="search-results"></div>
    </div>
  </header>

    <!-- Overlay -->
    <div id="overlay" onclick="toggleFilter()"></div>

    <!-- Menu -->
    <div id="categorySidebar">
 
  <nav>
     <button id="closeSidebar" onclick="toggleFilter()">❌</button>
  <h3>Menu</h3>
    <ul class=navlist>
      <li><a href="index.html">Home</a></li>
      <li><a href="shop.html">Shop</a></li>
      <li><a href="cart.html">My Cart</a></li>
      <li><a href="myorders.html">My Orders</a></li>
      <li><a href="cp.html">Account</a></li>
      <li><a href="giftcard.html">Gift Cards</a></li>
    </ul>
  </nav>
</div>

    <!-- HEADER STARTS -->
    <header class="header-container">
  <a href="shop.html"><img id="header-image" src="" alt="Loading.."></a>
  <div class="header-content">
    <a href="shop.html"><h2 id="header-title">Shop Now..</h2></a>
  </div>
</header>

    <!-- CATEGORY SECTION 1-->
   <div class="category-container">
  <h2 id="category-1-title">Fabrics</h2>
  <div id="category-1-subcategories" class="subcategory-container"></div>
   </div>
   
    <!-- CATEGORY SECTION 2-->
  <div class="category-container">
  <h2 id="category-2-title">Garments</h2>
  <div id="category-2-subcategories" class="subcategory-container"></div>
</div>

    <!-- HIGHLIGHTED HEADER -->
  <div class="highhead-container">
  <a href="shop.html"><img id="highlighted-image" src="" alt="Loading.."></a>
  <div class="highhead-content">
    <a href="shop.html"><h2 id="highlighted-title">Explore Now..</h2></a>
  </div>
</div>

    <!-- Category Section 3 -->
   <div class="category-container">
  <h2 id="category-3-title">Sewing Patterns</h2>
  <div id="category-3-subcategories" class="subcategory-container"></div>
</div>

    <!-- FAQ Section  -->
<section id="faq-section" class="faq">
    <div class="container">
        <h2>FAQ's</h2>
        <div id="faq-container"></div>
    </div>
</section>

<!-- Review section -->
<div class="container">
  <h2>Customer Reviews</h2>
  
  <div class="rating-summary">
      <div class="rating-layout">
          <div class="average-score">
              <div class="average-rating" id="averageRating">0.00</div>
              <div class="stars-display" id="averageStars">☆☆☆☆☆</div>
              <div class="rating-label">No Ratings</div>
              <div class="total-reviews" id="totalReviews">0 reviews</div>
          </div>
          
          <div class="review-carousel">
              <div class="carousel-container" id="allReviews">
                  <!-- Reviews will be added here by JavaScript -->
                  <div class="empty-state">No reviews yet. Be the first to leave a review!</div>
              </div>
              <div class="navigation-buttons">
                  <button class="nav-button" id="prevButton" aria-label="Previous reviews">←</button>
                  <button class="nav-button" id="nextButton" aria-label="Next reviews">→</button>
              </div>
          </div>
      </div>
  </div>
  <!-- HTML for the custom alert -->
<div id="customAlert" class="custom-alert">
  <div class="alert-content">
      <div class="alert-icon">
          <svg viewBox="0 0 24 24" width="24" height="24">
              <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
          </svg>
      </div>
      <div class="alert-message">Thank you! Your review has been submitted successfully.</div>
      <button class="alert-close" onclick="closeAlert()">×</button>
  </div>
</div>
<!-- HTML for the custom error alert -->
<div id="errorAlert" class="custom-alert error-alert">
  <div class="alert-content">
      <div class="alert-icon">
          <svg viewBox="0 0 24 24" width="24" height="24">
              <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
          </svg>
      </div>
      <div class="alert-message">There was an issue submitting your review. Please try again.</div>
      <button class="alert-close" onclick="closeErrorAlert()">×</button>
  </div>
</div>

  <div class="dropdown">
    <div class="dropdown-header" id="reviewToggle">
        <span>Leave a Review</span>
        <span class="arrow">▼</span>
    </div>
    <div class="dropdown-content" id="reviewContent">
        <form id="reviewForm">
            <div class="stars">
                <input type="radio" name="rating" id="star5" value="5"><label for="star5">★</label>
                <input type="radio" name="rating" id="star4" value="4"><label for="star4">★</label>
                <input type="radio" name="rating" id="star3" value="3"><label for="star3">★</label>
                <input type="radio" name="rating" id="star2" value="2"><label for="star2">★</label>
                <input type="radio" name="rating" id="star1" value="1"><label for="star1">★</label>
            </div>
            <textarea id="reviewText" placeholder="Write your review here..." required></textarea>
            <br>
            <button type="submit">Submit Review</button>
        </form>
    </div>
</div>

<!-- Review Modal -->
<div id="reviewModal" class="review-modal">
  <div class="modal-content">
      <span class="close-modal">&times;</span>
      <div class="modal-stars" id="modalStars"></div>
      <div class="modal-review-content" id="modalReviewContent"></div>
      <div class="modal-date" id="modalDate"></div>
  </div>
 </div>
</div>
<!-- Testimonial Section -->
<section class="testimonials-section">
  <div class="testimonials-header">
    
      <h2 class="section-title">Testimonials</h2>
      <div class="section-divider"></div>
  </div>
  
  <div class="testimonials-container" id="testimonials-container">
      <!-- Testimonials will be added here by JavaScript -->
  </div>
  
  <div class="testimonials-controls">
      <button class="control-btn prev-btn" id="prev-btn">
          <i class="fas fa-chevron-left"></i>
      </button>
      <div class="navigation" id="testimonial-nav">
          <!-- Navigation dots will be added here by JavaScript -->
      </div>
      <button class="control-btn next-btn" id="next-btn">
          <i class="fas fa-chevron-right"></i>
      </button>
  </div>
</section>


    <!-- FOOTER STARTS -->
    <footer class="footer-container">
     <div class="newsletter">
            <div class="newsletter-content">
                <p id="newsletter-text">Subscribe to our newsletter for latest updates!</p>
            </div>
        </div>


        <div class="newsletter-btn-container">
          <input class="email-btn" type="email" placeholder="Email" />
          <button class="sub-btn" type="button">Submit</button>
        </div>
      </div>

           <div class="footer-option-container">
            <!-- <div class="logo" id="logo-container">
                <a href="index.html">
                  <img id="site-logo" src="" alt="S2K Sewing"  />
                </a>
              </div> -->
           
            <div class="payment tut">
                <h4>Payment & Shipping</h4>
                <ul>
                    <li><a href="shippingcost.html">Shipping Cost</a></li>
                    
                   
                    <li><a href="cancellationpolicy.html">Cancellation </a></li>
                </ul>
            </div>
            <div class="Services tut">
                <h4>Services</h4>
                <ul>
                  <li><a href="giftcard.html">GiftCards</a></li>
                </ul>
            </div>
            <div class="Help tut">
                <h4>Help & Contact</h4>
                <ul>
                    <li><a href="contact.html">Help & Support</a></li>
                    
                    
                </ul>
            </div>
            <div class="About-Us tut">
                <h4>About Us</h4>
                <ul>
                    <li><a href="https://airlinksin.com/">Corporate Website</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </div>
        </div>
    </footer>
    
        <div class="end-footer">
            <div class="doc-con">
                <span><a href="">Privacy Policy</a></span>
                <span><a href="">GTC</a></span>
            </div>
    
            <div class="social-icon">
                <a href="#"><i class="fa-brands fa-instagram"></i></a>
                <a href="#"><i class="fa-brands fa-facebook"></i></a>
                <a href="#"><i class="fa-brands fa-pinterest"></i></a>
            </div>
    
            <div class="copyright">
                <span>Proudly powered by <a href="https://airlinksin.com/">AirLinksin</a></span>
            </div>
        </div>
    
    
        <script>
          document.addEventListener('DOMContentLoaded', function() {
            const toggle = document.getElementById('reviewToggle');
            const content = document.getElementById('reviewContent');
            
            toggle.addEventListener('click', function() {
                if (content.style.display === 'block') {
                    content.style.display = 'none';
                    toggle.classList.remove('active');
                } else {
                    content.style.display = 'block';
                    toggle.classList.add('active');
                }
            });
            
            document.getElementById('reviewForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const rating = document.querySelector('input[name="rating"]:checked');
                const reviewText = document.getElementById('reviewText').value;
                             
                // Reset form
                this.reset();
                
                // Close dropdown
                content.style.display = 'none';
                toggle.classList.remove('active');
            });
        });

          let products = [];
          let categories = [];

document.addEventListener("DOMContentLoaded", function () {
  // Fetch products
  fetch("https://script.google.com/macros/s/AKfycbxFLUCGkJduvdomkpc_SXxZsVcGkF99576QGfdzaRAYSfGFlAO6JKWSe6CN53Q8m88L/exec?action=getProducts")
    .then(response => response.json())
    .then(data => {
      if (data.success && data.products.length) {
        products = data.products;
      }
    })
    .catch(error => console.error("Error fetching products:", error));

  // Fetch categories
  fetch("https://script.google.com/macros/s/AKfycbxFLUCGkJduvdomkpc_SXxZsVcGkF99576QGfdzaRAYSfGFlAO6JKWSe6CN53Q8m88L/exec?action=getCategories")
    .then(response => response.json())
    .then(data => {
      const fetchedCategories = Array.isArray(data) ? data :
                              (data.success && data.categories ? data.categories : []);
      // Extract unique subcategories with their main categories
      const subcategoryMap = new Map();
      fetchedCategories.forEach(item => {
        const mainCategory = item.category ? item.category.toLowerCase() : '';
        const subCategory = item.subCategory ? item.subCategory : '';
        if (mainCategory && subCategory && !subcategoryMap.has(subCategory)) {
          subcategoryMap.set(subCategory, {
            name: subCategory,
            mainCategory: mainCategory,
            image: item.images && item.images.length > 0 ? item.images[0] : (item.image || '')
          });
        }
      });
      categories = Array.from(subcategoryMap.values());
    })
    .catch(error => console.error("Error fetching categories:", error));
});

function redirectToShopPage() {
  window.location.href = 'shop.html';
}

function searchProducts() {
  let input = document.getElementById("searchBar").value.toLowerCase().trim();
  let resultsDiv = document.getElementById("searchResults");

  if (input.length < 2) {
    resultsDiv.style.display = "none";
    return;
  }

  // Search in products
  let filteredProducts = products.filter(product => 
    product.name.toLowerCase().includes(input) ||
    product.category.toLowerCase().includes(input) ||
    (product.description && product.description.toLowerCase().includes(input))
  );

  // Search in subcategories
  let filteredCategories = categories.filter(category =>
    category.name.toLowerCase().includes(input) ||
    category.mainCategory.toLowerCase().includes(input)
  );

  // Limit results: up to 5 categories and up to 5 products (if both exist), otherwise up to 10 of one type
  let maxTotal = 10;
  let maxEach = 5;
  let showCategories = Math.min(filteredCategories.length, maxEach);
  let showProducts = Math.min(filteredProducts.length, maxEach);
  if (filteredCategories.length === 0) showProducts = Math.min(filteredProducts.length, maxTotal);
  if (filteredProducts.length === 0) showCategories = Math.min(filteredCategories.length, maxTotal);

  // Clear previous results
  resultsDiv.innerHTML = "";

  let hasResults = false;

  // Add subcategories section
  if (showCategories > 0) {
    hasResults = true;
    let categoryHeader = document.createElement("div");
    categoryHeader.className = "search-section-header";
    categoryHeader.innerHTML = "<strong>Categories</strong>";
    resultsDiv.appendChild(categoryHeader);

    filteredCategories.slice(0, showCategories).forEach(category => {
      let div = document.createElement("div");
      div.className = "search-result-item category-item";
      div.innerHTML = `
        <div class="search-item-content">
          <div class="search-item-image">
            <img src="${category.image || 'placeholder.jpg'}" alt="${category.name}" onerror="this.src='placeholder.jpg';">
          </div>
          <div class="search-item-details">
            <div class="search-item-title">${category.name}</div>
            <div class="search-item-subtitle">in ${category.mainCategory}</div>
          </div>
          <div class="search-item-type">Category</div>
        </div>
      `;
      div.onclick = () => {
        window.location.href = `shop.html?category=${category.mainCategory}&subcategory=${encodeURIComponent(category.name)}`;
        resultsDiv.style.display = "none";
      };
      resultsDiv.appendChild(div);
    });
  }

  // Add products section
  if (showProducts > 0) {
    hasResults = true;
    let productHeader = document.createElement("div");
    productHeader.className = "search-section-header";
    productHeader.innerHTML = "<strong>Products</strong>";
    resultsDiv.appendChild(productHeader);

    filteredProducts.slice(0, showProducts).forEach(product => {
      let div = document.createElement("div");
      div.className = "search-result-item product-item";
      // Get product image
      let productImage = '';
      if (product.images && product.images.length > 0) {
        productImage = product.images[0];
      } else if (product.image) {
        productImage = product.image;
      }
      div.innerHTML = `
        <div class="search-item-content">
          <div class="search-item-image">
            <img src="${productImage || 'placeholder.jpg'}" alt="${product.name}" onerror="this.src='placeholder.jpg';">
          </div>
          <div class="search-item-details">
            <div class="search-item-title">${product.name}</div>
            <div class="search-item-subtitle">${product.category || ''}</div>
            <div class="search-item-price">₹${product.price || 'N/A'}</div>
          </div>
          <div class="search-item-type">Product</div>
        </div>
      `;
      div.onclick = () => {
        window.location.href = `productpage.html?id=${product.id}`;
        resultsDiv.style.display = "none";
      };
      resultsDiv.appendChild(div);
    });
  }

  // Show results or no results message
  if (hasResults) {
    resultsDiv.style.display = "block";
  } else {
    resultsDiv.innerHTML = '<div class="search-no-results">No products or categories found</div>';
    resultsDiv.style.display = "block";
  }
}

// Close search results when clicking outside
// (This must be outside DOMContentLoaded to work globally)
document.addEventListener('click', function(event) {
  let searchBar = document.getElementById("searchBar");
  let resultsDiv = document.getElementById("searchResults");
  if (!searchBar.contains(event.target) && !resultsDiv.contains(event.target)) {
    resultsDiv.style.display = "none";
  }
});

// Handle keyboard navigation
// (This must be outside DOMContentLoaded to avoid duplicate listeners)
document.getElementById("searchBar").addEventListener('keydown', function(event) {
  let resultsDiv = document.getElementById("searchResults");
  let items = resultsDiv.querySelectorAll('.search-result-item');
  let currentSelected = resultsDiv.querySelector('.search-result-item.selected');
  let currentIndex = currentSelected ? Array.from(items).indexOf(currentSelected) : -1;

  if (event.key === 'ArrowDown') {
    event.preventDefault();
    if (currentSelected) currentSelected.classList.remove('selected');
    currentIndex = (currentIndex + 1) % items.length;
    if (items[currentIndex]) items[currentIndex].classList.add('selected');
  } else if (event.key === 'ArrowUp') {
    event.preventDefault();
    if (currentSelected) currentSelected.classList.remove('selected');
    currentIndex = currentIndex <= 0 ? items.length - 1 : currentIndex - 1;
    if (items[currentIndex]) items[currentIndex].classList.add('selected');
  } else if (event.key === 'Enter') {
    event.preventDefault();
    if (currentSelected) {
      currentSelected.click();
    }
  } else if (event.key === 'Escape') {
    resultsDiv.style.display = "none";
  }
});

// Clear selection when mouse enters the results
document.getElementById("searchResults").addEventListener('mouseenter', function() {
  let selected = this.querySelector('.search-result-item.selected');
  if (selected) selected.classList.remove('selected');
});

// Add hover effect for mouse users
document.addEventListener('DOMContentLoaded', function() {
  document.addEventListener('mouseover', function(event) {
    if (event.target.closest('.search-result-item')) {
      let item = event.target.closest('.search-result-item');
      let siblings = item.parentNode.querySelectorAll('.search-result-item');
      siblings.forEach(sibling => sibling.classList.remove('hover'));
      item.classList.add('hover');
    }
  });
});

          // Page Loading Function

            document.addEventListener("DOMContentLoaded", function () {
        setTimeout(() => {
          document.getElementById("loader").style.display = "none";
          document.getElementById("content").style.display = "block";
        }, 4000);
      });

      // RETRIVE FUNCTION

document.addEventListener("DOMContentLoaded", function () {
  fetch("https://script.google.com/macros/s/AKfycbyF_vLCIJK7evShOw2P_BPepGx-6fBIsGlndqnmfSiojDqgogEkYVeCZd9iU-2dI9RT/exec?action=getHomeData")
    .then(response => response.json())
    .then(data => {
      console.log("Fetched Data:", data);

      if (data.success) {
        // Set text content
        document.getElementById("header-title").textContent = data.headerTitle || "Default Header";
        document.getElementById("highlighted-title").textContent = data.highlightedTitle || "Default Highlighted Title";
        document.getElementById("scrolling-text").textContent = data.scrollingTitle || "Default Scrolling Offer";
        document.getElementById("newsletter-text").textContent = data.newsletterText || "Subscribe to our newsletter for latest updates!";
        
        // Get image elements
        let headerImg = document.getElementById("header-image");
        let highlightImg = document.getElementById("highlighted-image");
        
        // Set image URLs directly without conversion
        if (data.headerImage) {
          // Force HTTPS and add cachebuster parameter
          let imageUrl = ensureHttps(data.headerImage);
          headerImg.src = imageUrl + (imageUrl.includes('?') ? '&' : '?') + 'cb=' + new Date().getTime();
          console.log("Applied header image URL:", headerImg.src);
        }
        
        if (data.highlightedImage) {
          // Force HTTPS and add cachebuster parameter
          let imageUrl = ensureHttps(data.highlightedImage);
          highlightImg.src = imageUrl + (imageUrl.includes('?') ? '&' : '?') + 'cb=' + new Date().getTime();
          console.log("Applied highlighted image URL:", highlightImg.src);
        }
      }
    })
    .catch(error => console.error("Error fetching home data:", error));
});

// Helper function to ensure URLs use HTTPS
function ensureHttps(url) {
  if (!url) return "";
  return url.replace(/^http:\/\//i, 'https://');
}


 // Fetch FAQs from Google Sheets or Admin Panel
    document.addEventListener("DOMContentLoaded", function () {
    fetch("https://script.google.com/macros/s/AKfycbyF_vLCIJK7evShOw2P_BPepGx-6fBIsGlndqnmfSiojDqgogEkYVeCZd9iU-2dI9RT/exec")
      .then(response => response.json())
      .then(data => {
        
        if (data.success && data.faqs.length) {
          const faqContainer = document.getElementById("faq-container");
          data.faqs.forEach(faq => {
            const faqItem = document.createElement("div");
            faqItem.classList.add("faq-item");
            faqItem.innerHTML = `
              <button class="faq-question">${faq.question}</button>
              <div class="faq-answer">${faq.answer}</div>
            `;
            faqContainer.appendChild(faqItem);
          });
          
          document.querySelectorAll(".faq-question").forEach(button => {
            button.addEventListener("click", function () {
              this.nextElementSibling.classList.toggle("active");
              this.classList.toggle("active");
            });
          });
        }
      })
      .catch(error => console.error("Error fetching FAQs:", error));
  });
  

document.addEventListener("DOMContentLoaded", function () {
    fetch("https://script.google.com/macros/s/AKfycbxFLUCGkJduvdomkpc_SXxZsVcGkF99576QGfdzaRAYSfGFlAO6JKWSe6CN53Q8m88L/exec?action=getCategories")
        .then(response => response.json())
        .then(data => {
            console.log("Fetched Category Data:", data);
            
            // Check if data is an array directly (based on your console output)
            const categories = Array.isArray(data) ? data :
                              (data.success && data.categories ? data.categories : []);
            
            // Map category names to your HTML container IDs
            const categoryMap = {
                'fabrics': '1',
                'garments': '2', 
                'sewing patterns': '3'
            };
            
            // Group by subcategory within each main category
            const groupedByCategory = {};
            
            categories.forEach(item => {
                const mainCategory = item.category ? item.category.toLowerCase() : '';
                const subCategory = item.subCategory ? item.subCategory : 'Other'; // Use subCategory (capital C)
                if (mainCategory && categoryMap[mainCategory]) {
                    if (!groupedByCategory[mainCategory]) groupedByCategory[mainCategory] = {};
                    if (!groupedByCategory[mainCategory][subCategory]) groupedByCategory[mainCategory][subCategory] = [];
                    groupedByCategory[mainCategory][subCategory].push(item);
                }
            });
            
            // Now render subcategory cards
            Object.keys(groupedByCategory).forEach(mainCategory => {
                const containerID = categoryMap[mainCategory];
                const categoryContainer = document.getElementById(`category-${containerID}-subcategories`);
                if (!categoryContainer) return;

                // Clear previous content
                categoryContainer.innerHTML = '';

                Object.keys(groupedByCategory[mainCategory]).forEach(subCategory => {
                    const productsInSub = groupedByCategory[mainCategory][subCategory];
                    // Use the first product's image as a sample
                    const sampleImage = productsInSub[0].images && productsInSub[0].images.length > 0
                        ? productsInSub[0].images[0]
                        : (productsInSub[0].image || 'placeholder.jpg');

                    let subcategoryItem = document.createElement("div");
                    subcategoryItem.classList.add("subcategory-item");
                    subcategoryItem.innerHTML = `
                        <div class="subcategory-img-container">
                            <img src="${sampleImage}" alt="${subCategory}" class="subcategory-img" onerror="this.src='placeholder.jpg';">
                        </div>
                        <h3 class="subcategory-title">${subCategory}</h3>
                    `;
                    subcategoryItem.addEventListener('click', function() {
                        window.location.href = `shop.html?category=${mainCategory}&subcategory=${encodeURIComponent(subCategory)}`;
                    });
                    categoryContainer.appendChild(subcategoryItem);
                });
            });
        })
        .catch(error => console.error("❌ Error fetching category data:", error));

    // Add some basic CSS for the image count indicator
    const style = document.createElement('style');
    style.textContent = `
        .subcategory-img-container {
            position: relative;
            width: 100%;
            height: auto;
            overflow: hidden;
        }
        .image-count {
            position: absolute;
            bottom: 5px;
            right: 5px;
            background-color: rgba(0, 0, 0, 0.6);
            color: white;
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 12px;
        }
    `;
    document.head.appendChild(style);
});

// Change this timeout function
setTimeout(() => {
    document.querySelectorAll(".subcategory-container").forEach(container => {
        if (container) {  // Add this check
            container.style.display = "flex";
        }
    });
}, 1000);


// Filter Overlay Function

function toggleFilter() {
  let sidebar = document.getElementById("categorySidebar");
  let overlay = document.getElementById("overlay");

  if (sidebar.style.left === "0px") {
    sidebar.style.left = "-320px"; // Hide sidebar
    overlay.style.display = "none"; // Hide overlay
  } else {
    sidebar.style.left = "0px"; // Show sidebar
    overlay.style.display = "block"; // Show overlay
  }
}

// Email Collection Function
document.addEventListener("DOMContentLoaded", function() {
  const emailInput = document.querySelector(".email-btn");
  const submitButton = document.querySelector(".sub-btn");
  
  if (emailInput && submitButton) {
    submitButton.addEventListener("click", function() {
      const email = emailInput.value.trim();
      
      if (!email) {
        alert("Please enter an email address");
        return;
      }
      
      if (!isValidEmail(email)) {
        alert("Please enter a valid email address");
        return;
      }
      
      // Show loading state
      const originalText = submitButton.textContent;
      submitButton.textContent = "Subscribing...";
      submitButton.disabled = true;
      
      // Use the correct deployment ID
      const url = "https://script.google.com/macros/s/AKfycbySPzxg6YQ3VgsiG6dzRAYYR1WUGCc1V6QGUdoBSAoFXyhqdDbUmRY7ypfQBsWV3mAA/exec";
      
      // Use fetch with no-cors mode
      fetch(url + "?email=" + encodeURIComponent(email) + "&source=website", {
        method: 'GET',
        mode: 'no-cors', 
      })
      .then(() => {
        alert("Thank you for subscribing to our newsletter!");
        emailInput.value = ""; // Clear the input field
      })
      .catch(error => {
        console.error("Error:", error);
        alert("An error occurred. Please try again later.");
      })
      .finally(() => {
        // Reset button state
        submitButton.textContent = originalText;
        submitButton.disabled = false;
      });
    });
  }
  
  // Email validation function
  function isValidEmail(email) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
  }
});


// Reviews Section 

const googleScriptURL = "https://script.google.com/macros/s/AKfycbwLwHFHSXNvDsRf1PedwaF3Rf0nhJZbC1O-aOZYKmo03xNI3HzJJ5rh3mEsswE5Ot8uvg/exec";
        let reviews = [];
        const scrollAmount = 330; // Scroll amount in pixels
        
        document.getElementById('reviewForm').addEventListener('submit', function(event) {
            event.preventDefault();
            let rating = document.querySelector('input[name="rating"]:checked');
            let reviewText = document.getElementById('reviewText').value;
            
            if (!rating) {
                alert("Please select a star rating.");
                return;
            }
            
            // Show loading state
            const submitButton = this.querySelector('button[type="submit"]');
            const originalText = submitButton.textContent;
            submitButton.textContent = "Submitting...";
            submitButton.disabled = true;
            
            // Format data to match the Apps Script expectations
            // The Apps Script expects rating and review fields
            // JavaScript for the custom alert
function showAlert() {
    const alert = document.getElementById('customAlert');
    alert.style.display = 'flex';
    
    // Auto close after 3 seconds
    setTimeout(() => {
        closeAlert();
    }, 3000);
}

function closeAlert() {
    const alert = document.getElementById('customAlert');
    alert.style.display = 'none';
}

// Example of how to use it when submitting the form
document.getElementById('reviewForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    // Form validation here...
    
    // Show the custom alert instead of using alert()
    showAlert();
    
    // Reset form
    this.reset();
    
    // Additional code as needed
    // JavaScript for the custom error alert
function showErrorAlert() {
    const alert = document.getElementById('errorAlert');
    alert.style.display = 'flex';
    
    // Auto close after 4 seconds
    setTimeout(() => {
        closeErrorAlert();
    }, 4000);
}

function closeErrorAlert() {
    const alert = document.getElementById('errorAlert');
    alert.style.display = 'none';
}

// Example of how to use it when there's an error submitting the form
function handleFormError() {
    // Show the custom error alert instead of using alert()
    showErrorAlert();
}

// Example implementation in your form submission handler:
});
            fetch(googleScriptURL, {
                method: "POST",
                mode: "no-cors", // Required for Google Apps Script
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ 
                    rating: rating.value, 
                    review: reviewText
                })
            }).then(() => {
              showAlert();
                document.getElementById('reviewForm').reset();
                loadReviews(); // Reload reviews after submission
            }).catch(error => {
              showErrorAlert()
                console.error("Error submitting review:", error);
            }).finally(() => {
                // Reset button state
                submitButton.textContent = originalText;
                submitButton.disabled = false;
            });
        });

        function loadReviews() {
            // Show loading indicator
            const reviewContainer = document.getElementById('allReviews');
            reviewContainer.innerHTML = '<div class="empty-state">Loading reviews...</div>';
            
            // Use fetch with no special options to get the reviews
            // The Apps Script returns an array of objects with timestamp, rating, and review properties
            fetch(googleScriptURL)
                .then(response => {
                    // Handle the response appropriately
                    // If response.json() doesn't work directly due to CORS, we use the fallback data
                    try {
                        return response.json();
                    } catch (e) {
                        console.warn("Couldn't parse JSON response, using sample data instead");
                        throw new Error("JSON parse error");
                    }
                })
                .then(data => {
                    reviews = data.map(item => ({
                        rating: Number(item.rating),
                        review: item.review,
                        date: formatDate(new Date(item.timestamp))
                    }));
                    renderAllReviews();
                    updateAverageRating();
                })
                .catch(error => {
                    console.error("Error loading reviews:", error);
                    // For demonstration or if fetch fails due to CORS, load sample data
                    loadSampleReviews();
                });
        }
        
        function formatDate(date) {
            // Check if date is valid
            if (!(date instanceof Date) || isNaN(date)) {
                return "Recently";
            }
            
            const now = new Date();
            const diffTime = Math.abs(now - date);
            const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays === 0) {
                const diffHours = Math.floor(diffTime / (1000 * 60 * 60));
                return diffHours <= 1 ? "Just now" : `${diffHours} hours ago`;
            } else if (diffDays === 1) {
                return "Yesterday";
            } else if (diffDays < 7) {
                return `${diffDays} days ago`;
            } else {
                return date.toLocaleDateString();
            }
        }
        
        function loadSampleReviews() {
            // Sample reviews for demonstration or testing
            reviews = [
                { rating: 5, review: "Excellent service, couldn't be happier with my purchase!", date: "20 hours ago" },
                { rating: 5, review: "Great quality fabric and attention to detail.", date: "5 days ago" },
                { rating: 4, review: "Great value for customers and prompt delivery.", date: "07/03/2025" },
                { rating: 4, review: "The items arrived well-packaged and in perfect condition.", date: "13/03/2025" },
                { rating: 5, review: "I love the quality and the service.", date: "25/02/2025" },
                { rating: 3, review: "Delivery took longer than expected. Otherwise satisfied.", date: "01/03/2025" },
                { rating: 5, review: "Amazing selection and the customer service is top-notch!", date: "20/03/2025" }
            ];
            
            renderAllReviews();
            updateAverageRating();
        }

        function renderAllReviews() {
            let reviewContainer = document.getElementById('allReviews');
            reviewContainer.innerHTML = "";
            
            if (reviews.length === 0) {
                reviewContainer.innerHTML = '<div class="empty-state">No reviews yet. Be the first to leave a review!</div>';
                return;
            }
            
            reviews.forEach((review, index) => {
                let reviewSlide = document.createElement('div');
                reviewSlide.className = 'review-slide';
                
                // Create star rating display with filled and empty stars
                let starDisplay = '';
                for (let i = 1; i <= 5; i++) {
                    starDisplay += i <= review.rating ? '★' : '☆';
                }
                
                // Format review text with line breaks for better readability
                let formattedReview = review.review.replace(/\n/g, '<br>');
                
                reviewSlide.innerHTML = `
                    <div class="review-header">
                        <div class="review-rating">${starDisplay}</div>
                        <div class="review-date">${review.date || 'Recently'}</div>
                    </div>
                    <div class="review-content">${formattedReview}</div>
                    <a class="action-button" data-index="${index}">Read more</a>
                `;
                
                reviewContainer.appendChild(reviewSlide);
            });
            
            document.getElementById('totalReviews').textContent = `${reviews.length} reviews`;
            
            // Add event listeners to "Read more" buttons
            document.querySelectorAll('.action-button').forEach((button) => {
                button.addEventListener('click', function() {
                    const index = this.getAttribute('data-index');
                    showReviewModal(index);
                });
            });
        }
        
        // Function to display the review in a modal with transition
        function showReviewModal(index) {
            const review = reviews[index];
            const modal = document.getElementById('reviewModal');
            const modalStars = document.getElementById('modalStars');
            const modalContent = document.getElementById('modalReviewContent');
            const modalDate = document.getElementById('modalDate');
            
            // Generate stars for modal
            let starDisplay = '';
            for (let i = 1; i <= 5; i++) {
                starDisplay += i <= review.rating ? '★' : '☆';
            }
            
            // Format review text with line breaks
            let formattedReview = review.review.replace(/\n/g, '<br>');
            
            modalStars.innerHTML = starDisplay;
            modalContent.innerHTML = formattedReview;
            modalDate.textContent = review.date || 'Recently';
            
            // Show the modal with transition
            modal.style.display = 'block';
            // Force reflow to ensure the transition works
            void modal.offsetWidth;
            // Add class to trigger transition
            modal.classList.add('show');
            
            // Close modal when clicking the X
            document.querySelector('.close-modal').onclick = function() {
                closeModal();
            };
            
            // Close modal when clicking outside
            window.onclick = function(event) {
                if (event.target === modal) {
                    closeModal();
                }
            };
            
            // Close modal on ESC key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && modal.style.display === 'block') {
                    closeModal();
                }
            });
        }
        
        // Function to close modal with transition
        function closeModal() {
            const modal = document.getElementById('reviewModal');
            
            // Remove class to trigger out transition
            modal.classList.remove('show');
            
            // Wait for transition to complete before hiding
            setTimeout(() => {
                modal.style.display = 'none';
            }, 300); // Match this with the CSS transition time
        }

        function updateAverageRating() {
            if (reviews.length === 0) {
                document.getElementById('averageRating').textContent = "0.00";
                document.getElementById('averageStars').innerHTML = '☆☆☆☆☆';
                document.querySelector('.rating-label').textContent = 'No Ratings';
                return;
            }
            
            const total = reviews.reduce((sum, review) => sum + parseInt(review.rating), 0);
            const average = (total / reviews.length).toFixed(2);
            
            document.getElementById('averageRating').textContent = average;
            
            // Generate stars based on rating
            let starsHTML = '';
            
            // Add full stars
            for (let i = 1; i <= 5; i++) {
                if (i <= Math.floor(average)) {
                    starsHTML += '★'; // Full star
                } else if (i - 0.5 <= average) {
                    starsHTML += '★'; // Rounded up for values ≥ x.5
                } else {
                    starsHTML += '☆'; // Empty star
                }
            }
            
            document.getElementById('averageStars').innerHTML = starsHTML;
            
            // Set rating label based on average
            const ratingLabel = document.querySelector('.rating-label');
            if (average >= 4.5) ratingLabel.textContent = 'Excellent';
            else if (average >= 4) ratingLabel.textContent = 'Very Good';
            else if (average >= 3) ratingLabel.textContent = 'Good';
            else if (average >= 2) ratingLabel.textContent = 'Fair';
            else ratingLabel.textContent = 'Poor';
        }
        
        // Navigation buttons functionality
        document.getElementById('prevButton').addEventListener('click', () => {
            document.getElementById('allReviews').scrollLeft -= scrollAmount;
        });

        document.getElementById('nextButton').addEventListener('click', () => {
            document.getElementById('allReviews').scrollLeft += scrollAmount;
        });

        // Check if we're on a touch device and enhance scrolling
        function isTouchDevice() {
            return 'ontouchstart' in window || navigator.maxTouchPoints > 0;
        }

        if (!isTouchDevice()) {
            // Add scroll on mouse wheel for desktop
            document.getElementById('allReviews').addEventListener('wheel', function(e) {
                if (e.deltaY !== 0) {
                    e.preventDefault();
                    this.scrollLeft += e.deltaY;
                }
            }, { passive: false });
        }

        // Add keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (document.activeElement.tagName !== 'TEXTAREA') {
                if (e.key === 'ArrowLeft') {
                    document.getElementById('allReviews').scrollLeft -= scrollAmount;
                } else if (e.key === 'ArrowRight') {
                    document.getElementById('allReviews').scrollLeft += scrollAmount;
                }
            }
        });

        // Auto-hide navigation buttons if all reviews are visible
        function checkNavButtonsVisibility() {
            const review = document.getElementById('allReviews');
            const maxScroll = container.scrollWidth - container.clientWidth;
            
            if (maxScroll <= 0) {
                document.querySelector('.navigation-buttons').style.display = 'none';
            } else {
                document.querySelector('.navigation-buttons').style.display = 'flex';
            }
        }

        // Check on load and resize
        window.addEventListener('resize', checkNavButtonsVisibility);
        setTimeout(checkNavButtonsVisibility, 500); // Check after initial render

        // Initial load
        loadReviews();
 



        // Testimonials adding section
              
 // Web app URL from Google Apps Script - REPLACE THIS with your actual URL
const API_URL = 'https://script.google.com/macros/s/AKfycbwaMYn1wOQVin4FvrbcgERC2i9JbyyyE7LxnPBuMdeSZk-mGfrfYPnAup9Hj-XgK_4GEQ/exec';

// DOM elements
const testimonialsContainer = document.getElementById('testimonials-container');
const navContainer = document.getElementById('testimonial-nav');
const prevBtn = document.getElementById('prev-btn');
const nextBtn = document.getElementById('next-btn');

// Variables
let testimonials = [];
let displayCount = getDisplayCount();
let currentIndex = 0;

// Determine how many testimonials to display based on screen width
function getDisplayCount() {
    if (window.innerWidth > 992) return 3;
    if (window.innerWidth > 768) return 2;
    return 1;
}

// Fetch testimonials from Google Sheets
async function fetchTestimonials() {
    try {
        // Show loading state
        testimonialsContainer.innerHTML = '<div class="loading-spinner"><div></div><div></div><div></div></div>';
        
        // Fetch data using JSONP approach for cross-domain requests
        const script = document.createElement('script');
        const callbackName = 'testimonialCallback_' + Math.floor(Math.random() * 10000);
        
        // Create global callback function
        window[callbackName] = function(data) {
            testimonials = data;
            renderTestimonials();
            // Clean up
            delete window[callbackName];
            document.body.removeChild(script);
        };
        
        script.src = `${API_URL}?action=getAllTestimonials&callback=${callbackName}`;
        document.body.appendChild(script);
        
        // Set timeout for fallback
        setTimeout(() => {
            if (testimonials.length === 0) {
                useDefaultTestimonials();
            }
        }, 5000);
    } catch (error) {
        console.error('Error fetching testimonials:', error);
        useDefaultTestimonials();
    }
}

// Use default testimonials if API fails
function useDefaultTestimonials() {
    testimonials = [
        {
            id: 1,
            photo: "https://randomuser.me/api/portraits/women/65.jpg",
            name: "Emma Thompson",
            position: "CEO, Innovate Solutions",
            text: "Partnering with this team has been a game-changer for our business. Their strategic approach to our digital transformation increased our conversion rates by 45% within just three months."
        },
        {
            id: 2,
            photo: "https://randomuser.me/api/portraits/men/32.jpg",
            name: "James Wilson",
            position: "CTO, TechForward Inc.",
            text: "As a technology company, we have high standards for our digital partners. This team not only met but exceeded our expectations. Their technical knowledge and innovative solutions made complex projects feel seamless."
        },
        {
            id: 3,
            photo: "https://randomuser.me/api/portraits/women/45.jpg",
            name: "Sophia Martinez",
            position: "Marketing Director, Global Brands",
            text: "The level of creativity and attention to detail this team brings is unmatched. They took the time to understand our brand voice and translated it perfectly into our digital presence."
        },
        {
            id: 4,
            photo: "https://randomuser.me/api/portraits/men/67.jpg",
            name: "Robert Chen",
            position: "Founder, StartUp Ventures",
            text: "As a startup founder, I needed a partner who could understand my vision and help bring it to life with limited resources. This team delivered exceptional value and strategic guidance."
        },
        {
            id: 5,
            photo: "https://randomuser.me/api/portraits/women/22.jpg",
            name: "Olivia Johnson",
            position: "E-commerce Director, Retail Giant",
            text: "Our e-commerce platform needed a complete overhaul to meet changing customer expectations. This team delivered a solution that improved user experience and optimized our backend operations."
        },
        {
            id: 6,
            photo: "https://randomuser.me/api/portraits/men/41.jpg",
            name: "Daniel Kim",
            position: "Operations Manager, Service Pro",
            text: "Working with this team transformed our service delivery model. Their custom software solution streamlined our operations, reducing response times by 40% and improving customer satisfaction."
        }
    ];
    renderTestimonials();
}

// Create testimonial cards
function renderTestimonials() {
    testimonialsContainer.innerHTML = '';
    navContainer.innerHTML = '';
    
    if (testimonials.length === 0) {
        testimonialsContainer.innerHTML = '<p class="no-testimonials">No testimonials available at this time.</p>';
        return;
    }
    
    for (let i = 0; i < displayCount; i++) {
        const index = (currentIndex + i) % testimonials.length;
        const testimonial = testimonials[index];
        
        const card = document.createElement('div');
        card.className = 'testimonial-card';
        card.innerHTML = `
            <div class="profile-header">
                <div class="profile-img-container">
                    <img src="${testimonial.photo}" alt="${testimonial.name}" class="profile-img" onerror="this.src='https://via.placeholder.com/70?text=User'">
                </div>
                <div class="client-info">
                    <h4 class="client-name">${testimonial.name}</h4>
                    <p class="client-position">${testimonial.position}</p>
                </div>
            </div>
            <p class="testimonial-text">${testimonial.text}</p>
            <div class="testimonial-rating">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
            </div>
        `;
        
        testimonialsContainer.appendChild(card);
    }
    
    // Create navigation dots
    const totalPages = Math.ceil(testimonials.length / displayCount);
    for (let i = 0; i < totalPages; i++) {
        const dot = document.createElement('div');
        dot.className = `nav-dot ${i === Math.floor(currentIndex / displayCount) ? 'active' : ''}`;
        dot.addEventListener('click', () => {
            currentIndex = i * displayCount;
            renderTestimonials();
        });
        navContainer.appendChild(dot);
    }
}

// Navigation functions
function goToPrev() {
    currentIndex = (currentIndex - 1 + testimonials.length) % testimonials.length;
    renderTestimonials();
}

function goToNext() {
    currentIndex = (currentIndex + 1) % testimonials.length;
    renderTestimonials();
}

// Event listeners
prevBtn.addEventListener('click', goToPrev);
nextBtn.addEventListener('click', goToNext);

// Check if we need to refresh data (every 5 minutes)
function setupRefreshInterval() {
    const REFRESH_INTERVAL = 5 * 60 * 1000; // 5 minutes
    setInterval(fetchTestimonials, REFRESH_INTERVAL);
}

// Initialize
fetchTestimonials();
setupRefreshInterval();

// Responsive handling
window.addEventListener('resize', () => {
    const newDisplayCount = getDisplayCount();
    if (newDisplayCount !== displayCount) {
        displayCount = newDisplayCount;
        renderTestimonials();
    }
});

// Auto rotate testimonials every 7 seconds
let autoRotateInterval;

function startAutoRotate() {
    autoRotateInterval = setInterval(() => {
        if (testimonials.length > 0) {
            goToNext();
        }
    }, 7000);
}

function stopAutoRotate() {
    clearInterval(autoRotateInterval);
}

// Start auto-rotation
startAutoRotate();

// Pause auto-rotation when user interacts with testimonials
testimonialsContainer.addEventListener('mouseenter', stopAutoRotate);
testimonialsContainer.addEventListener('mouseleave', startAutoRotate);
prevBtn.addEventListener('mouseenter', stopAutoRotate);
prevBtn.addEventListener('mouseleave', startAutoRotate);
nextBtn.addEventListener('mouseenter', stopAutoRotate);
nextBtn.addEventListener('mouseleave', startAutoRotate);
navContainer.addEventListener('mouseenter', stopAutoRotate);
navContainer.addEventListener('mouseleave', startAutoRotate);

// Add keyboard navigation
document.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowLeft') {
        goToPrev();
    } else if (e.key === 'ArrowRight') {
        goToNext();
    }
});

// Add touch swipe support
let touchStartX = 0;
let touchEndX = 0;

testimonialsContainer.addEventListener('touchstart', (e) => {
    touchStartX = e.changedTouches[0].screenX;
    stopAutoRotate();
}, { passive: true });

testimonialsContainer.addEventListener('touchend', (e) => {
    touchEndX = e.changedTouches[0].screenX;
    handleSwipe();
    startAutoRotate();
}, { passive: true });

function handleSwipe() {
    const swipeThreshold = 50;
    if (touchEndX < touchStartX - swipeThreshold) {
        // Swiped left
        goToNext();
    } else if (touchEndX > touchStartX + swipeThreshold) {
        // Swiped right
        goToPrev();
    }
}

// Add loading animation
function addLoadingAnimation() {
    const style = document.createElement('style');
    style.textContent = `
        .loading-spinner {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            width: 100%;
            gap: 10px;
        }
        
        .loading-spinner div {
            width: 12px;
            height: 12px;
            background-color: #4361ee;
            border-radius: 50%;
            animation: bounce 1.4s infinite ease-in-out both;
        }
        
        .loading-spinner div:nth-child(1) {
            animation-delay: -0.32s;
        }
        
        .loading-spinner div:nth-child(2) {
            animation-delay: -0.16s;
        }
        
        @keyframes bounce {
            0%, 80%, 100% { 
                transform: scale(0);
            } 40% { 
                transform: scale(1);
            }
        }
        
        .no-testimonials {
            text-align: center;
            padding: 40px;
            color: #64748b;
            font-style: italic;
        }
        
        .testimonial-card {
            opacity: 0;
            animation: fadeIn 0.5s forwards;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    `;
    document.head.appendChild(style);
}

// Add animation for testimonial transitions
function addTransitionAnimations() {
    const style = document.createElement('style');
    style.textContent = `
        .testimonials-container {
            position: relative;
        }
        
        .testimonial-card {
            animation-delay: calc(var(--index) * 0.1s);
        }
    `;
    document.head.appendChild(style);
}

// Add accessibility features
function enhanceAccessibility() {
    // Add proper ARIA attributes
    prevBtn.setAttribute('aria-label', 'Previous testimonial');
    nextBtn.setAttribute('aria-label', 'Next testimonial');
    
    // Make navigation dots accessible
    navContainer.setAttribute('role', 'tablist');
    navContainer.setAttribute('aria-label', 'Testimonial navigation');
    
    // Update the renderTestimonials function to add ARIA attributes to dots
    const originalRender = renderTestimonials;
    renderTestimonials = function() {
        originalRender();
        
        // Add ARIA attributes to navigation dots
        const dots = navContainer.querySelectorAll('.nav-dot');
        dots.forEach((dot, index) => {
            dot.setAttribute('role', 'tab');
            dot.setAttribute('aria-selected', dot.classList.contains('active'));
            dot.setAttribute('aria-label', `Testimonial page ${index + 1}`);
            dot.setAttribute('tabindex', dot.classList.contains('active') ? '0' : '-1');
        });
    };
}

// Initialize additional features
addLoadingAnimation();
addTransitionAnimations();
enhanceAccessibility();



       
        
    </script>
       </body>
</html>
